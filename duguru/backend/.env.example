# backend/.env.example
# Copy to .env and fill in your values.
# Never commit .env to version control.

# ─── Server ───────────────────────────────────────────────────────
NODE_ENV=development
PORT=3000

# ─── Database (PostgreSQL via Prisma) ─────────────────────────────
# Formato: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=public
DATABASE_URL=postgresql://postgres:password@localhost:5432/duguru_dev?schema=public

# ─── JWT (RS256) — Princípio III da Constituição ──────────────────
# Chaves RSA 4096-bit geradas com:
#   openssl genrsa -out private_key.pem 4096
#   openssl rsa -in private_key.pem -pubout -out public_key.pem
# Cole os conteúdos abaixo (com quebras de linha como \n ou em bloco multiline).
RSA_PRIVATE_KEY=
RSA_PUBLIC_KEY=

# Expiração dos tokens
JWT_ACCESS_TOKEN_EXPIRES_IN=15m
JWT_REFRESH_TOKEN_EXPIRES_IN=7d

# ─── CORS ─────────────────────────────────────────────────────────
CORS_ORIGIN=http://localhost:5173

# ─── Geocoding ────────────────────────────────────────────────────
# OpenCage Geocoding API — https://opencagedata.com/
# Plano gratuito: 2.500 req/dia. Fallback automático para Nominatim.
OPENCAGE_API_KEY=

# ─── Email (Nodemailer / SMTP) ────────────────────────────────────
# Brevo / Sendinblue — https://app.brevo.com/
# Plano gratuito: 300 emails/dia.
SMTP_HOST=smtp-relay.brevo.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
EMAIL_FROM=noreply@duguru.app

# ─── Swiss Ephemeris ──────────────────────────────────────────────
# Diretório com arquivos .se1 (1800–2400).
# Padrão: ./ephemeris (relativo à raiz do backend)
SWEPH_PATH=./ephemeris

# ─── Upload / Storage ─────────────────────────────────────────────
# Diretório para uploads de avatar (desenvolvimento)
UPLOAD_DIR=./uploads
# Tamanho máximo de upload (bytes) — padrão 5 MB
MAX_UPLOAD_SIZE=5242880

# ─── Monitoramento ────────────────────────────────────────────────
# DSN do Sentry para captura de erros no backend
SENTRY_DSN=

# ─── Rate Limiting ────────────────────────────────────────────────
# Janela de tempo (ms) e máximo de tentativas de login
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_LOGIN=5

# ─── Puppeteer / PDF ──────────────────────────────────────────────
# Timeout para geração de PDF (ms)
PDF_GENERATION_TIMEOUT_MS=30000
